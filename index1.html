<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내일배움캠프 최고 평점 영화</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="js/app.js">
</head>
<body>
    <header class = 'header'>
        <div>
            <h1>내배캠 최고 평점 영화</h1>
        </div>
    </header>
    <div class="search">
        <span class="label">영화 검색:</span>
        <input type="text" class="movie_serach" placeholder="영화 제목을 검색해보세요">
        <button class="submit" onclick="button()">검색</button>
    </div>
    <main>
    <div id = "livecards-box"class="card-box" onclick="click()">
        <div class="col">
            <div class="movie-card">
              <img src="" class="card-img">
              <div class="card-body">
                <h5 class="card-title">영화 제목이 들어갑니다</h5>
                <p class="card-text">여기에 영화에 대한 설명이 들어갑니다.</p>
                <p >평점<span class="rank">0.0</span></spans></p>
              </div>
            </div>
          </div>
    </div>
    </main>
    <script>
        fetch("https://api.themoviedb.org/3/movie/top_rated?language=en-US&page=1", {
          method: "GET",
          headers: {
            accept: "application/json",
            Authorization:
              "Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4MjI1YTQ1OGUyOWYwZmM3MmY3M2NmOWI2N2Q0Y2RhZSIsInN1YiI6IjY0NzQ3OTM2Y2MyNzdjMDBhNzQ1ZTkzNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.s7NxkvQgNu-c9D-N1Zs4Ae3m1qnf4ipY3X3zQd4XseA",
          },
        })
          .then((response) => response.json())
          .then((response) => {
            console.log(response)
            let movies = response.results;
            let movieCards = "";
            movies.forEach((movie) => {
              movieCards += `
              <div id="livecards-box" class="card-box" onclick=`click(${movie.id})`>
                  <div class="col">
                    <div class="movie-card">
                      <img src="https://image.tmdb.org/t/p/w500/${movie.backdrop_path}" class="card-img">
                      <div class="card-body">
                        <h5 class="card-title">${movie.original_title}</h5>
                        <p class="card-text">${movie.overview}</p>
                        <p>평점<span class="rank">${movie.vote_average}</span></p>
                      </div>
                    </div>
                  </div>
                </div>
              `;
              console.log(movie.id);
            });
            document.getElementById("livecards-box").innerHTML = movieCards;
          })
          .catch((err) => console.error(err));
      
        function click(movieId) {
          alert("영화 id: " + movieId);
        }
      </script>
</body>
</html>